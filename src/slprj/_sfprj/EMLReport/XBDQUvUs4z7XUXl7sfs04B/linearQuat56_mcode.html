<!-- saved from url=(0014)about:internet -->
<pre class="code">
<span class="srcline"><span class="lineno"><a href="41,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T19U3">Aqq</span>, <span class="var type1" id="S3T20U4">Aee</span>, <span class="var type1" id="S4T20U5">B</span>] = linearQuat( <span class="var type1" id="S5T18U8">q</span>, <span class="var type1" id="S6T2U9">w</span> , <span class="var type1" id="S7T3U10">dt</span>, <span class="var type1" id="S8T8U11">Beuler</span> )</span></span>
<span class="srcline"><span class="lineno"><a href="41,2" id="srcline2"> 2</a></span><span class="line"><span class="comment">%UNTITLED2 Summary of this function goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="41,3" id="srcline3"> 3</a></span><span class="line"><span class="comment">%   Detailed explanation goes here</span></span></span>
<span class="srcline"><span class="lineno"><a href="41,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T3:U8"><span class="var type1" id="S9T3U14">q1</span>=<span class="mxinfo " id="T3:U10"><span class="var type1" id="S5T18U16">q</span>(1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="41,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T3:U12"><span class="var type1" id="S10T3U20">q2</span>=<span class="mxinfo " id="T3:U14"><span class="var type1" id="S5T18U22">q</span>(2)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="41,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T3:U16"><span class="var type1" id="S11T3U26">q3</span>=<span class="mxinfo " id="T3:U18"><span class="var type1" id="S5T18U28">q</span>(3)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="41,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T3:U20"><span class="var type1" id="S12T3U32">q4</span>=<span class="mxinfo " id="T3:U22"><span class="var type1" id="S5T18U34">q</span>(4)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="41,8" id="srcline8"> 8</a></span><span class="line"><span class="comment">% get the plant, A as fxn of quaternions</span></span></span>
<span class="srcline"><span class="lineno"><a href="41,9" id="srcline9"> 9</a></span><span class="line"><span class="mxinfo " id="T19:U24"><span class="var type1" id="S13T19U38">B_</span> = <span class="mxinfo " id="T19:U26">[<span class="mxinfo " id="T24:U27"><span class="mxinfo " id="T3:U28">0</span> <span class="mxinfo " id="T3:U29"><span class="var type1" id="S6T2U43">w</span>(3)</span> <span class="mxinfo " id="T3:U31">-<span class="mxinfo " id="T3:U32"><span class="var type1" id="S6T2U47">w</span>(2)</span></span> <span class="mxinfo " id="T3:U34"><span class="var type1" id="S6T2U50">w</span>(1)</span></span>; <span class="mxinfo " id="T24:U36"><span class="mxinfo " id="T3:U37">-<span class="mxinfo " id="T3:U38"><span class="var type1" id="S6T2U55">w</span>(3)</span></span> <span class="mxinfo " id="T3:U40">0</span> <span class="mxinfo " id="T3:U41"><span class="var type1" id="S6T2U59">w</span>(1)</span> <span class="mxinfo " id="T3:U43"><span class="var type1" id="S6T2U62">w</span>(2)</span></span>; <span class="mxinfo " id="T24:U45"><span class="mxinfo " id="T3:U46"><span class="var type1" id="S6T2U66">w</span>(2)</span> <span class="mxinfo " id="T3:U48">-<span class="mxinfo " id="T3:U49"><span class="var type1" id="S6T2U70">w</span>(1)</span></span> <span class="mxinfo " id="T3:U51">0</span> <span class="mxinfo " id="T3:U52"><span class="var type1" id="S6T2U74">w</span>(3)</span></span>; <span class="keyword">...</span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="41,10" id="srcline10">10</a></span><span class="line"><span class="mxinfo " id="T19:U24"><span class="mxinfo " id="T19:U26">  <span class="mxinfo " id="T24:U54"><span class="mxinfo " id="T3:U55">-<span class="mxinfo " id="T3:U56"><span class="var type1" id="S6T2U79">w</span>(1)</span></span> <span class="mxinfo " id="T3:U58">-<span class="mxinfo " id="T3:U59"><span class="var type1" id="S6T2U83">w</span>(2)</span></span> <span class="mxinfo " id="T3:U61">-<span class="mxinfo " id="T3:U62"><span class="var type1" id="S6T2U87">w</span>(3)</span></span> <span class="mxinfo " id="T3:U64">0</span></span>]</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="41,11" id="srcline11">11</a></span><span class="line"><span class="mxinfo " id="T19:U65"><span class="var type1" id="S2T19U92">Aqq</span> = <span class="mxinfo " id="T19:U67"><span class="mxinfo " id="T19:U68">eye(4)</span> + <span class="mxinfo " id="T19:U69"><span class="mxinfo " id="T3:U70"><span class="var type1" id="S7T3U99">dt</span> * <span class="mxinfo " id="T3:U72">0.5</span></span> * <span class="var type1" id="S13T19U101">B_</span></span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="41,12" id="srcline12">12</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="41,13" id="srcline13">13</a></span><span class="line"><span class="comment">% get the control, B as fxn of moments</span></span></span>
<span class="srcline"><span class="lineno"><a href="41,14" id="srcline14">14</a></span><span class="line"><span class="mxinfo " id="T3:U74"><span class="var type1" id="S15T3U104">wx</span> = <span class="mxinfo " id="T3:U76">0</span></span>; <span class="comment">%Beuler(1,1);</span></span></span>
<span class="srcline"><span class="lineno"><a href="41,15" id="srcline15">15</a></span><span class="line"><span class="mxinfo " id="T3:U77"><span class="var type1" id="S16T3U108">wy</span> = <span class="mxinfo " id="T3:U79">0</span></span>; <span class="comment">%Beuler(2,2);</span></span></span>
<span class="srcline"><span class="lineno"><a href="41,16" id="srcline16">16</a></span><span class="line"><span class="mxinfo " id="T3:U80"><span class="var type1" id="S17T3U112">wz</span> = <span class="mxinfo " id="T3:U82">0</span></span>; <span class="comment">%Beuler(3,3); %wx = dt/Ixx*Mx</span></span></span>
<span class="srcline"><span class="lineno"><a href="41,17" id="srcline17">17</a></span><span class="line"><span class="mxinfo " id="T20:U83"><span class="var type1" id="S18T20U116">A_w</span> = <span class="mxinfo " id="T20:U85"><span class="mxinfo " id="T3:U86"><span class="mxinfo " id="T3:U87">0.5</span> * <span class="var type1" id="S7T3U120">dt</span></span> * <span class="mxinfo " id="T20:U89">[<span class="mxinfo " id="T22:U90"><span class="var type1" id="S12T3U123">q4</span> <span class="mxinfo " id="T3:U92">-<span class="var type1" id="S11T3U125">q3</span></span> <span class="var type1" id="S10T3U126">q2</span></span>;<span class="mxinfo " id="T22:U95"><span class="var type1" id="S11T3U128">q3</span> <span class="var type1" id="S12T3U129">q4</span> <span class="mxinfo " id="T3:U98">-<span class="var type1" id="S9T3U131">q1</span></span></span>;<span class="mxinfo " id="T22:U100"><span class="mxinfo " id="T3:U101">-<span class="var type1" id="S10T3U134">q2</span></span> <span class="var type1" id="S9T3U135">q1</span> <span class="var type1" id="S12T3U136">q4</span></span>; <span class="mxinfo " id="T22:U105"><span class="mxinfo " id="T3:U106">-<span class="var type1" id="S9T3U139">q1</span></span> <span class="mxinfo " id="T3:U108">-<span class="var type1" id="S10T3U141">q2</span></span> <span class="mxinfo " id="T3:U110">-<span class="var type1" id="S11T3U143">q3</span></span></span>]</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="41,18" id="srcline18">18</a></span><span class="line"><span class="mxinfo " id="T20:U112"><span class="var type1" id="S3T20U146">Aee</span> = <span class="var type1" id="S18T20U147">A_w</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="41,19" id="srcline19">19</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="41,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo " id="T20:U115"><span class="var type1" id="S4T20U150">B</span> = <span class="mxinfo " id="T20:U117"><span class="mxinfo " id="T3:U118"><span class="mxinfo " id="T3:U119">0.5</span> * <span class="var type1" id="S7T3U154">dt</span></span> * <span class="mxinfo " id="T20:U121">[<span class="mxinfo " id="T22:U122"><span class="mxinfo " id="T3:U123"><span class="var type1" id="S12T3U158">q4</span>*<span class="mxinfo " id="T3:U125"><span class="var type1" id="S15T3U159">wx</span></span></span> <span class="mxinfo " id="T3:U127"><span class="mxinfo " id="T3:U128">-<span class="var type1" id="S11T3U162">q3</span></span>*<span class="mxinfo " id="T3:U130"><span class="var type1" id="S16T3U163">wy</span></span></span> <span class="mxinfo " id="T3:U132"><span class="var type1" id="S10T3U165">q2</span>*<span class="mxinfo " id="T3:U134"><span class="var type1" id="S17T3U166">wz</span></span></span></span>;<span class="mxinfo " id="T22:U136"><span class="mxinfo " id="T3:U137"><span class="var type1" id="S11T3U169">q3</span>*<span class="mxinfo " id="T3:U139"><span class="var type1" id="S15T3U170">wx</span></span></span> <span class="mxinfo " id="T3:U141"><span class="var type1" id="S12T3U172">q4</span>*<span class="mxinfo " id="T3:U143"><span class="var type1" id="S16T3U173">wy</span></span></span> <span class="mxinfo " id="T3:U145"><span class="mxinfo " id="T3:U146">-<span class="var type1" id="S9T3U176">q1</span></span>*<span class="mxinfo " id="T3:U148"><span class="var type1" id="S17T3U177">wz</span></span></span></span>;<span class="mxinfo " id="T22:U150"><span class="mxinfo " id="T3:U151"><span class="mxinfo " id="T3:U152">-<span class="var type1" id="S10T3U181">q2</span></span>*<span class="mxinfo " id="T3:U154"><span class="var type1" id="S15T3U182">wx</span></span></span> <span class="mxinfo " id="T3:U156"><span class="var type1" id="S9T3U184">q1</span>*<span class="mxinfo " id="T3:U158"><span class="var type1" id="S16T3U185">wy</span></span></span> <span class="mxinfo " id="T3:U160"><span class="var type1" id="S12T3U187">q4</span>*<span class="mxinfo " id="T3:U162"><span class="var type1" id="S17T3U188">wz</span></span></span></span>; <span class="keyword">...</span></span></span></span></span></span>
<span class="srcline"><span class="lineno"><a href="41,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T20:U115"><span class="mxinfo " id="T20:U117"><span class="mxinfo " id="T20:U121">  <span class="mxinfo " id="T22:U164"><span class="mxinfo " id="T3:U165"><span class="mxinfo " id="T3:U166">-<span class="var type1" id="S9T3U192">q1</span></span>*<span class="mxinfo " id="T3:U168"><span class="var type1" id="S15T3U193">wx</span></span></span> <span class="mxinfo " id="T3:U170"><span class="mxinfo " id="T3:U171">-<span class="var type1" id="S10T3U196">q2</span></span>*<span class="mxinfo " id="T3:U173"><span class="var type1" id="S16T3U197">wy</span></span></span> <span class="mxinfo " id="T3:U175"><span class="mxinfo " id="T3:U176">-<span class="var type1" id="S11T3U200">q3</span></span>*<span class="mxinfo " id="T3:U178"><span class="var type1" id="S17T3U201">wz</span></span></span></span>]</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="41,22" id="srcline22">22</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="41,23" id="srcline23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="41,24" id="srcline24">24</a></span><span class="line"></span></span>
</pre>
